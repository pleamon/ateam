model Project {
    id          String   @id @default(uuid())
    name        String
    description String?
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    
    // 用户关联
    createdBy   String?              // 创建者ID
    creator     User?    @relation(fields: [createdBy], references: [id])
    members     ProjectMember[]      // 项目成员

    tasks               Task[]
    documentation       Documentation[]
    Minimap             Minimap[]
    Sprint              Sprint[]
    Requirement         Requirement[]
    RequirementQuestion RequirementQuestion[]
    DomainKnowledge     DomainKnowledge[]
    SystemArchitecture  SystemArchitecture[]
    roadmaps            Roadmap[]
    DataStructure       DataStructure[]
    ApiDesign           ApiDesign[]

    @@schema("scrum")
}

model Sprint {
    id        String   @id @default(uuid())
    projectId String
    project   Project  @relation(fields: [projectId], references: [id])
    name      String
    startDate DateTime
    endDate   DateTime
    goal      String
    status    String   @default("todo") // todo, in_progress, done
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@schema("scrum")
}

model Task {
    id                String              @id @default(uuid())
    projectId         String
    project           Project             @relation(fields: [projectId], references: [id])
    teamId            String
    team              Team                @relation(fields: [teamId], references: [id])
    title             String
    content           String?
    status            String              @default("todo") // todo, in_progress, testing, done
    dueDate           DateTime?
    createdAt         DateTime            @default(now())
    updatedAt         DateTime            @updatedAt
    TeamMemberTask    TeamMemberTask[]
    TeamMemberWorklog TeamMemberWorklog[]
    TaskActivity      TaskActivity[]
    Feature           Feature?            @relation(fields: [featureId], references: [id])
    featureId         String?

    @@schema("scrum")
}
